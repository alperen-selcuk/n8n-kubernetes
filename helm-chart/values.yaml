# N8N Helm Chart - Values
# Sadece özelleştirilmesi gereken değerleri bu dosyada tutun.
# Diğer tüm değerler template dosyalarında default olarak tanımlanmıştır.

# Namespace
namespace: n8n

# Redis (genellikle değiştirmeye gerek yok)
redis:
  enabled: true
  image:
    repository: redis
    tag: "6.2"
    pullPolicy: IfNotPresent
  # replicas: 1
  # port: 6379
  # storage:
  #   size: 1Gi
  #   storageClassName: ""

# PostgreSQL Authentication (CUSTOMIZE REQUIRED)
postgresql:
  enabled: true
  image:
    repository: postgres
    tag: "13"
    pullPolicy: IfNotPresent
  auth:
    username: "n8n"
    password: "n8n"  # ÖNEMLİ: Değiştirin!
    database: "n8n"
  # replicas: 1
  # port: 5432
  # storage:
  #   size: 5Gi
  #   storageClassName: ""

# N8N Secrets (CUSTOMIZE REQUIRED)
n8n:
  image:
    repository: n8nio/n8n
    tag: "latest"
    pullPolicy: IfNotPresent
  
  secret:
    encryptionKey: "your-super-secret-encryption-key"  # ÖNEMLİ: Değiştirin!
    dbPassword: "n8n"  # ÖNEMLİ: postgresql.auth.password ile aynı olmalı
  
  # Main instance
  main:
    enabled: true
    # replicas: 1
    # storage: 5Gi
    # storageClass: ""
  
  # Worker instance
  worker:
    enabled: true
    # replicas: 1
  
  # N8N Configuration
  config:
    # Domain yapılandırması (ZORUNLU)
    host: "n8n.example.com"  # ÖNEMLİ: Domain adınızı girin
    protocol: "https"
    webhookUrl: "https://n8n.example.com"  # ÖNEMLİ: Domain adınızı girin
    
    # Opsiyonel ayarlar (gerekirse değiştirin, yoksa default değerler kullanılır)
    # timezone: "UTC"  # Zaman dilimi (örn: "Europe/Istanbul", "America/New_York")
    # port: 5678
    
    # Execution kayıt ayarları
    # executionsDataSaveOnError: "all"  # "all" veya "none"
    # executionsDataSaveOnSuccess: "none"  # "all" veya "none"
    # executionsDataPrune: "true"  # Eski execution'ları otomatik temizle
    # executionsDataMaxAge: "336"  # Execution saklama süresi (saat cinsinden, 336 = 14 gün)
    
    # Güvenlik ayarları
    # secureCookie: "true"  # HTTPS için cookie güvenliği
    # blockEnvAccessInNode: "true"  # Node'lardan environment variable erişimini engelle
    # payloadSizeMax: "16"  # Maksimum payload boyutu (MB)
    
    # Database ayarları (genellikle değiştirmeye gerek yok)
    # dbType: "postgres"
    # dbHost: "postgresql"
    # dbPort: 5432
    # dbDatabase: "n8n"  # postgresql.auth.database ile eşleşmeli
    # dbUser: "n8n"  # postgresql.auth.username ile eşleşmeli
    # dbSchema: "public"
    
    # Queue/Worker ayarları (genellikle değiştirmeye gerek yok)
    # executionsMode: "queue"  # "queue" veya "regular"
    # queueBullRedisHost: "redis"
    # queueBullRedisPort: 6379
    # queueBullRedisDb: 1

# Ingress configuration (opsiyonel - ingress kullanacaksanız)
ingress:
  enabled: false
  className: "nginx"
  host: "n8n.example.com"

# Gateway API configuration (opsiyonel - gateway API kullanacaksanız)
gateway:
  enabled: false
  name: "http-gateway"
  namespace: "default"
  host: "n8n.gw.example.com"

# Autoscaling (opsiyonel - HPA kullanacaksanız)
autoscaling:
  enabled: false

# Backup configuration (opsiyonel - backup kullanacaksanız)
backup:
  enabled: false
  schedule: "0 2 * * *"  # Her gün saat 02:00
  
  # Storage seçenekleri (birini aktif edin):
  storage:
    # 1. PersistentVolume kullan (local backup)
    persistentVolume:
      enabled: true  # Default: local PVC kullanır
      size: 5Gi
      # storageClassName: ""  # İsterseniz özel storage class
      # existingClaim: ""  # Var olan PVC kullanmak için
    
    # 2. AWS S3 (bulut backup)
    # s3:
    #   enabled: false
    #   region: "us-east-1"
    #   bucket: "n8n-backups"
    #   secretName: "aws-s3-credentials"  # accessKey ve secretKey içeren secret
    
    # 3. MinIO veya S3-uyumlu storage (self-hosted)
    # minio:
    #   enabled: false
    #   endpoint: "https://minio.example.com"
    #   bucket: "n8n-backups"
    #   secretName: "minio-credentials"  # accessKey ve secretKey içeren secret
    
    # 4. Azure Blob Storage
    # azure:
    #   enabled: false
    #   container: "n8n-backups"
    #   secretName: "azure-storage-credentials"  # connection-string içeren secret
    
    # 5. NFS (network storage)
    # nfs:
    #   enabled: false
    #   server: "nfs-server.example.com"
    #   path: "/exports/n8n-backups"
